---
title: 07_gRPC
date: "2026-01-31"
---

## 結論

gRPCは、**RESTの弱点を補い、CORBAの良さを現代的に再設計したAPI方式**。
高速・型安全・厳密な契約を重視し、マイクロサービス間通信に強い。

---

## gRPCが生まれた背景

### RESTの課題

* 型が弱く、実行時エラーになりやすい
* API仕様がコードから分かりにくい
* 通信効率が良くない（JSON + HTTP/1.1）

👉 **機械同士の通信には物足りなくなった**。

---

## gRPCの基本思想

> 人ではなく、 **プログラム同士が正確に話すことを最優先**

* 厳密な契約
* 高速通信
* 明示的なエラー

👉 「便利さ」と「現実」を両立させる。

---

## gRPCにおけるAPIの決め方

（02_APIの決め事.md の観点）

### 1. 何ができるか（操作）

* RPCメソッドとして定義

```proto
rpc SayHello(HelloRequest) returns (HelloResponse);
```

---

### 2. どう呼ぶか（呼び方）

* メソッド呼び出し（RPC）
* 通信はHTTP/2

👉 CORBAに近いが、通信は意識しやすい。

---

### 3. 何を渡すか（入力）

* protoで定義した型付きメッセージ

```proto
message HelloRequest {
  string name = 1;
}
```

---

### 4. 何が返るか（出力）

* protoで定義したレスポンス

```proto
message HelloResponse {
  string message = 1;
}
```

---

### 5. 失敗したらどうなるか（エラー）

* ステータスコード + メッセージ
* タイムアウトや再試行を設計で考慮

👉 失敗が前提。

---

## protoとは何か

proto（Protocol Buffers）は、
**gRPCにおけるAPIの契約書**。

* 厳密な型定義
* 言語非依存
* コード自動生成

👉 IDL（CORBA）の現代版。

---

## gRPCの良い点

* 高速（バイナリ通信）
* 型安全
* 契約が明確
* 自動生成が強力

👉 内部サービス間通信に最適。

---

## gRPCの弱点

* ブラウザから直接使いにくい
* 学習コストがやや高い
* 可視性が低い（curlで叩けない）

👉 公開APIには不向きなことも。

---

## RESTとの使い分け

| 観点   | REST     | gRPC |
| ---- | -------- | ---- |
| 主用途  | 外部・公開API | 内部通信 |
| 型安全  | △        | ◎    |
| 人間可読 | ◎        | △    |
| 速度   | △        | ◎    |

---

## CORBAとの関係

gRPCは、

* CORBAの「分散RPC」思想
* CORBAの失敗点を反省

を踏まえて設計されている。

👉 **CORBAの再挑戦**とも言える。

---

## まとめ（方式の歴史）

* CORBA：理想を追求
* REST：現実を受け入れ
* gRPC：現実の中で最適化

---

## 全体の締め

API方式は優劣ではなく、
**目的に応じて選ぶもの**。

このmd群は、その判断材料を整理したもの。
