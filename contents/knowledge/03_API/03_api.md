---
title: 03_API設計
date: "2026-01-27"
---

## 結論

API設計とは、**「使う側が迷わず、安全に、長く使えるAPIを考えること」** 。</p>
機能を実装することよりも、**どう見せるか・どう約束するか** が重要になる。

---

## API設計が重要な理由

APIは一度公開すると、簡単には変更できない。

* 使う側のコードに直接影響する
* 変更すると修正コストが大きい
* 長期間使われ続けることが多い

👉 そのため、最初の設計がとても重要。

---

## 良いAPIの特徴

### 1. 直感的に使える

APIを見たときに、「何ができるか」「どう使うか」が想像できる。

* 名前が分かりやすい
* 役割が明確
* 余計なことを考えなくていい

👉 ドキュメントを読まなくても、ある程度使える。

---

### 2. 一貫性がある

同じような操作は、同じルールで呼べる。

悪い例：

* 取得は `getUser`
* 登録は `create_user`
* 削除は `removeUserData`

良い例：

* `getUser`
* `createUser`
* `deleteUser`

👉 命名・構造・考え方が統一されている。

---

### 3. 必要以上のことを要求しない

APIを使うために、
内部事情や余計な情報を知る必要がない。

悪い例：

* 内部IDを意識させる
* 実装順序を強制する

👉 **使う側の負担が小さいAPIが良いAPI**。

---

### 4. 失敗を前提にしている

ネットワークや処理は、必ず失敗する可能性がある。

良いAPIは：

* エラーが分かりやすい
* 何が悪かったかが判断できる
* 再試行できる設計になっている

👉 「失敗したらどうなるか」が明確。

---

### 5. 将来の変更に耐えられる

* 項目が増えても壊れにくい
* 仕様変更が段階的にできる

👉 **今だけでなく、将来を考えた設計**。

---

## 悪いAPIの典型例

### 1. 何をするAPIか分からない

* 名前が抽象的
* 役割が広すぎる

👉 使う側が毎回調べる必要がある。

---

### 2. 呼び方がバラバラ

* 同じ意味なのに違う呼び方
* ルールが途中で変わる

👉 ミスを生みやすい。

---

### 3. エラーが曖昧

* 失敗理由が分からない
* 成功・失敗の区別がつかない

👉 デバッグが地獄になる。

---

### 4. 内部構造が漏れている

* DBの構造がそのまま見えている
* 実装変更がそのまま影響する

👉 API変更が頻発する。

---

## API設計と方式の関係

* API設計：**何をどう約束するか**
* API方式：**その約束をどう表現・通信するか**

👉 良いAPI設計は、CORBA / REST / gRPC どの方式でも重要。
