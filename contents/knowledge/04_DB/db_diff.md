---
title: SQL Server と Oracle の思想差まとめ
date: "2026-02-05"
---

本ドキュメントでは、SQL Server（T-SQL）と Oracle における
設計・運用の観点から、**実行計画・パース・最適化に関する思想差**を一枚で整理する。

---

## 1. 基本思想の違い

| 観点     | Oracle     | SQL Server |
| ------ | ---------- | ---------- |
| 基本スタンス | 開発者主導      | DBエンジン主導   |
| 設計責任   | 開発者が明示的に負う | DBが可能な限り吸収 |
| 最適化思想  | 決定論・再現性重視  | 自動化・柔軟性重視  |

---

## 2. SQL識別と実行計画再利用

### Oracle

* SQL文字列の**完全一致**が再利用条件
* バインド変数は設計上の必須要件
* SQLが揃わない場合、即ハードパース増加

### SQL Server

* SQL文字列一致に加え、**自動パラメータ化**を実施
* Simple / Forced Parameterization をサポート
* DB側が再利用性を高めにいく設計

---

## 3. パラメータに対する思想

| 観点     | Oracle      | SQL Server   |
| ------ | ----------- | ------------ |
| パラメータ化 | 明示的（バインド変数） | 自動（条件付き）     |
| 実行計画   | 汎用的         | 初回値依存が多い     |
| 代表的問題  | バインドピーキング   | パラメータスニッフィング |

---

## 4. 性能問題の現れ方

### Oracleで起きやすい

* ハードパース多発
* Library Cache 競合
* CPU使用率の急上昇

→ **SQL設計の良し悪しが直接性能に影響**

### SQL Serverで起きやすい

* 特定条件だけ極端に遅くなる
* 再起動・キャッシュクリアで一時的に改善

→ **自動最適化の副作用としての不安定さ**

---

## 5. チューニング・運用スタンス

| 観点   | Oracle         | SQL Server      |
| ---- | -------------- | --------------- |
| 主戦場  | 設計・実装フェーズ      | 運用・監視フェーズ       |
| 主な対策 | SQL修正 / バインド統一 | OPTION指定 / 統計更新 |
| 可視化  | AWR / ASH      | 実行計画キャッシュ       |

---

## 6. 向いているシステム像

* **Oracle向き**

  * 高トラフィック・高再現性要求
  * 厳格な設計統制が可能な組織

* **SQL Server向き**

  * 業務変化が多いシステム
  * 運用で吸収できる体制がある組織

---

## 7. 一文で言い切ると

* **Oracle**：
  「DBは仕様通りにしか動かない。責任は開発者が持て」

* **SQL Server**：
  「DBが最善を尽くす。ただし副作用は運用で面倒を見る」

---

## 8. まとめ

同じRDBMSでも、OracleとSQL Serverでは
**設計責任の置き所と最適化の考え方が根本的に異なる**。

DB固有の思想を理解した上で、設計・レビュー・運用を行うことが重要である。
